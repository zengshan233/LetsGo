var app=angular.module("myApp",["ionic","cyfDirectives","ngCordova"]).config(["$stateProvider","$ionicConfigProvider",function(o,e){e.tabs.position("bottom"),o.state("tabs",{abstract:!0,templateUrl:"tplTabs"}).state("tab1",{url:"/tab1",parent:"tabs",views:{view1:{templateUrl:"home.html",controller:"home"}}}).state("tab2",{url:"/tab2",parent:"tabs",views:{view2:{templateUrl:"find.html",controller:"find"}}}).state("tab3",{url:"/tab3",parent:"tabs",views:{view3:{templateUrl:"places.html",controller:"place"}}}).state("tab4",{url:"/tab4",parent:"tabs",views:{view4:{templateUrl:"profile.html",controller:"profile"}}}).state("search",{url:"/search",templateUrl:"index_search.html",controller:"search"}).state("news",{url:"/news",templateUrl:"index_news.html",controller:"news"}).state("common1",{url:"/common1/:id",cache:!1,templateUrl:"index-template-one.html",controller:"common1"}).state("common2",{url:"/common2/:index",cache:!1,templateUrl:"index-template-two.html",controller:"common2"}).state("common3",{url:"/common3/:index",cache:!1,templateUrl:"index-template-three.html",controller:"common3"}).state("goods",{url:"/goods/:index/:id",cache:!1,templateUrl:"goods.html",controller:"goods"}).state("log",{url:"/log",cache:!1,templateUrl:"login.html"})}]).run(["$rootScope","$ionicHistory","$state",function(o,e,t){o.back=function(){e.goBack()},o.search=function(){t.go("search")}}]).controller("myController",["$state","$scope",function(o,e){o.go("tab1")}]).controller("profile",["$scope","$http","$state",function(o,e,t){o.data1=["收藏","足迹","咨询","订阅"],o.data2=[{ico:"icon-hand",name:"待付款"},{ico:"icon-daibuchong",name:"待补充"},{ico:"icon-daichuxing",name:"待出行"},{ico:"icon-daipingjia",name:"待评价"},{ico:"icon-shouhou2",name:"售后"}],o.data3=[{ico:"icon-youhuiquan",name:"优惠券"},{ico:"icon-yijianfankui",name:"常见问题与意见反馈"},{ico:"icon-shezhi",name:"更多设置"}],o.toLog=function(){t.go("log")}}]).controller("home",["$scope","$state","$http","$ionicScrollDelegate","$timeout","back","$cordovaBarcodeScanner",function(o,e,t,n,c,i,a){o.country=["日本","泰国","香港","新加坡","马来西亚","美国","法国"],o.trip=["img/img1.jpg","img/img2.jpg","img/img3.jpg"],o.img=[{url:"img/loop1.jpeg",con:"人的一生至少要有两次冲动"},{url:"img/loop2.png",con:"一次奋不顾身的爱情"},{url:"img/loop3.jpg",con:"一场说走就走的旅行"},{url:"img/loop4.jpg",con:"你........心动了吗？"}],o.place=[],o.top=!1,o.news=function(){e.go("news")},o.scanBarcode=function(){a.scan().then(function(o){alert(o.text),console.log("Barcode Format -> "+o.format),console.log("Cancelled -> "+o.cancelled)},function(o){console.log("An error happened -> "+o)})},o.scroll=function(){var e=n.$getByHandle("content1").getScrollPosition().top;e>=1e3?o.top=!0:o.top=!1},o.toTop=function(){n.$getByHandle("content1").scrollTop(!0),o.top=!1},t.get("json/options.json").success(function(e){o.options=e}),t.get("json/json1.json").success(function(e){o.service=e});for(var r=1;r<=3;r++)t.get("json/templateOne-"+r+".json").success(function(e){o.place.push(e.detail)});o.over=!1,o.show=!0;var s=0;o.getData=function(){t.get("json/templateOne-7.json").success(function(e){2==s?(o.show=!1,o.over=!0,c(function(){o.show=!0,o.$broadcast("scroll.infiniteScrollComplete"),o.over=!1},2e3),c(function(){s=0},1e5)):c(function(){void 0==o.like?o.like=e.detail:o.like=o.like.concat(e.detail),o.$broadcast("scroll.infiniteScrollComplete"),s++},2e3)})}}]).controller("place",["$state","$scope","$http",function(o,e,t){e.area=["海岛","东南亚","国内","亚洲","欧洲","大洋洲","北美","非洲"];var n=["icon-miyuehaidao","icon-taiguoyiliao","icon-map","icon-yazhou","icon-icon001","icon-sydney1162852easyiconnet","icon-meiguoguan","icon-feizhou"];t.get("json/country.json").success(function(o){nation=o,e.nation=nation[0],e.icon=n[0],e.continent="海岛"}),e.country=function(o,t){e.nation=nation[o],e.icon=n[o],e.continent=t}}]).controller("search",["$state","$scope","$ionicHistory",function(o,e,t){e.data=["日本","韩国","泰国","三亚","巴厘岛","马尔代夫","台湾","厦门","美国","东京","大阪","香港","新加坡","澳大利亚"]}]).controller("news",["$state","$scope",function(o,e){e.data=[{ico:"icon-order",name:"订单消息"},{ico:"icon-iconfontzhizuobiaozhun41",name:"订单提醒"},{ico:"icon-youhuiquan1",name:"优惠券消息"}]}]).controller("common1",["$state","$scope","$http","$stateParams",function(o,e,t,n){t.get("json/templateOne-"+n.id+".json").success(function(o){e.num=n.id,e.data=o})}]).controller("common2",["$state","$scope","$http","$stateParams",function(o,e,t,n){new Swiper(".swiper",{pagination:".swiper-pagination",effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:"auto",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}});e.ary=[["热销","自由行",1],["特价","机票",2],["热销","城市玩乐",3],["必备","签证",4],["必备","酒店",5],["必备","接送机包车",16]],t.get("json/options.json").success(function(o){e.options=o}),t.get("json/country.json").success(function(o){for(var t=o,c=[],i=0;i<t.length;i++)c[i]=t[i].filter(function(o){return o.id==n.index});e.nation=c.filter(function(o){return 0!=o.length})[0][0]}),e.json=[];for(var c=1;c<=e.ary.length;c++)c==e.ary.length&&(c=16),t.get("json/templateOne-"+c+".json").success(function(o){e.json.push(o)})}]).controller("common3",["$state","$scope","$http","$stateParams",function(o,e,t,n){var c=[{id:1,url:"img/banner1_03.png",title:"限时特卖",color:"#99e1ff"},{id:3,url:"img/banner2_02.png",title:"尾货抢购",color:"#e18522"},{id:2,url:"img/banner3_02.png",title:"超值机票",color:"#05c296"},{id:9,url:"img/banner4_02.png",title:"手机专享",color:"#f5f5f5"}],i=c[n.index];e.title=i.title,e.url=i.url,e.color=i.color,t.get("json/templateOne-"+i.id+".json").success(function(o){e.data1=o}),t.get("json/templateOne-"+(i.id+1)+".json").success(function(o){e.data2=o})}]).controller("goods",["$stateParams","$scope","$http",function(o,e,t){t.get("json/templateOne-"+o.index+".json").success(function(t){var n=t.detail;n=n.filter(function(e){return e.id==o.id}),e.goods=n[0]})}]).controller("find",["$stateParams","$scope","$http",function(o,e,t){e.rank=[{img:"img/play6.jpg",con:"酒店"},{img:"img/play5.jpg",con:"目的地"},{img:"img/freetrip6.jpg",con:"海岛"},{img:"img/country41.jpg",con:"景点"},{img:"img/play4.jpg",con:"餐厅"}],t.get("json/date.json").success(function(o){e.date=o});var n=new Swiper(".swiper0",{effect:"fade",grabCursor:!0,centeredSlides:!0,slidesPerView:"auto",onSlideChangeEnd:function(o){for(var t=o.activeIndex,n=0;n<3;n++)t==n?e["nav"+t]=!0:e["nav"+n]=!1;e.$apply()}});e.nav0=!0,e.directTo=function(o){n.slideTo(o,1e3,!1);for(var t=0;t<3;t++)o==t?e["nav"+o]=!0:e["nav"+t]=!1},t.get("json/country.json").success(function(o){e.data1=o[6],e.data2=o[4]})}]);app.service("back",function(){this.run=function(o,e,t){e(function(){for(var e=0;e<o.length;e++){var n=t.$getByHandle(o[e]),c=n.getScrollView(),i=c.touchStart,a=c.mouseDown,r=c.touchMove,s=c.mouseMove,l=c.__container;l.removeEventListener("touchstart",i),l.removeEventListener("mousedown",a),document.removeEventListener("touchmove",r),document.removeEventListener("mousemove",s),c.touchStart=function(o){o.preventDefault=function(){},i&&i.apply(c,[o])},c.mouseDown=function(o){o.preventDefault=function(){},a&&a.apply(c,[o])},c.touchMove=function(o){o.preventDefault=function(){},r&&r.apply(c,[o])},c.mouseMove=function(o){o.preventDefault=function(){},s&&s.apply(c,[o])},l.addEventListener("touchstart",c.touchStart,!1),l.addEventListener("mousedown",c.mouseDown,!1),document.addEventListener("touchmove",c.touchMove,!1),document.addEventListener("mousemove",c.mouseMove,!1)}})}});